---
jobs:
- name: test-unboxit-sequelgen
  plan:
  - get: ci
  - get: unboxit-sequelgen
    trigger: true
  - task: nsp-test
    file: ci/concourse-ci/tasks/nsp-test/task.yml
    input_mapping: {source-code: unboxit-sequelgen}
  - task: snyk-test
    file: ci/concourse-ci/tasks/snyk-test/task.yml
    input_mapping: {source-code: unboxit-sequelgen}
    params:
      SNYK_TOKEN: {{snyk-token}}
      USER_ID: {{snyk-user-id}}

- name: test-unboxit-nosequelgen
  plan:
  - get: ci
  - get: unboxit-nosequelgen
    trigger: true
  - task: nsp-test
    file: ci/concourse-ci/tasks/nsp-test/task.yml
    input_mapping: {source-code: unboxit-nosequelgen}
  - task: snyk-test
    file: ci/concourse-ci/tasks/snyk-test/task.yml
    input_mapping: {source-code: unboxit-nosequelgen}
    params:
      SNYK_TOKEN: {{snyk-token}}
      USER_ID: {{snyk-user-id}}

- name: test-unboxit-elming
  plan:
  - get: ci
  - get: unboxit-elming
    trigger: true
  - task: npm-test
    file: ci/concourse-ci/tasks/npm-test/task.yml
  - task: yarn-test
    file: ci/concourse-ci/tasks/yarn-test/task.yml
    input_mapping: {source-code: unboxit-elming}
  - task: nsp-test
    file: ci/concourse-ci/tasks/nsp-test/task.yml
    input_mapping: {source-code: unboxit-elming}
  - task: snyk-test
    file: ci/concourse-ci/tasks/snyk-test/task.yml
    input_mapping: {source-code: unboxit-elming}
    params:
      SNYK_TOKEN: {{snyk-token}}
      USER_ID: {{snyk-user-id}}

- name: test-unboxit-tdd-es6-babel-jest
  plan:
  - get: ci
  - get: unboxit-tdd-es6-babel-jest
    trigger: true
  - task: npm-test
    file: ci/concourse-ci/tasks/npm-test/task.yml
  - task: yarn-test
    file: ci/concourse-ci/tasks/yarn-test/task.yml
    input_mapping: {source-code: unboxit-tdd-es6-babel-jest}
  - task: nsp-test
    file: ci/concourse-ci/tasks/nsp-test/task.yml
    input_mapping: {source-code: unboxit-tdd-es6-babel-jest}
  - task: snyk-test
    file: ci/concourse-ci/tasks/snyk-test/task.yml
    input_mapping: {source-code: unboxit-tdd-es6-babel-jest}
    params:
      SNYK_TOKEN: {{snyk-token}}
      USER_ID: {{snyk-user-id}}

- name: test-unboxit-npm-scripts-only
  plan:
  - get: ci
  - get: unboxit-npm-scripts-only
    trigger: true
  - task: nsp-test
    file: ci/concourse-ci/tasks/nsp-test/task.yml
    input_mapping: {source-code: unboxit-npm-scripts-only}
  - task: snyk-test
    file: ci/concourse-ci/tasks/snyk-test/task.yml
    input_mapping: {source-code: unboxit-npm-scripts-only}
    params:
      SNYK_TOKEN: {{snyk-token}}
      USER_ID: {{snyk-user-id}}

- name: test-cloudbased-jeopardy
  plan:
  - get: ci
  - get: cloudbased-jeopardy
    trigger: true
  - task: nsp-test
    file: ci/concourse-ci/tasks/nsp-test/task.yml
    input_mapping: {source-code: cloudbased-jeopardy}
  - task: snyk-test
    file: ci/concourse-ci/tasks/snyk-test/task.yml
    input_mapping: {source-code: cloudbased-jeopardy}
    params:
      SNYK_TOKEN: {{snyk-token}}
      USER_ID: {{snyk-user-id}}

resources:
- name: ci
  type: git
  source:
    uri: git@github.com:gdumitrescu/testing-ci.git
    branch: master
    private_key: {{private-key}}

- name: unboxit-sequelgen
  type: git
  source:
    uri: git@github.com:unboxit/sequelgen.git
    branch: master
    private_key: {{private-key}}


- name: unboxit-nosequelgen
  type: git
  source:
    uri: git@github.com:unboxit/nosequelgen.git
    branch: master
    private_key: {{private-key}}

- name: unboxit-elming
  type: git
  source:
    uri: git@github.com:unboxit/elming.git
    branch: master
    private_key: {{private-key}}

- name: unboxit-tdd-es6-babel-jest
  type: git
  source:
    uri: git@github.com:unboxit/tdd-es6-babel-jest.git
    branch: master
    private_key: {{private-key}}

- name: unboxit-npm-scripts-only
  type: git
  source:
    uri: git@github.com:unboxit/npm-scripts-only.git
    branch: master
    private_key: {{private-key}}

- name: cloudbased-jeopardy
  type: git
  source:
    uri: git@github.com:cloudbased/jeopardy.git
    branch: master
    private_key: {{private-key}}
